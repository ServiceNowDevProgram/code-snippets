var user = new GlideRecord("sys_user");
user.addActiveQuery();
user.addEncodedQuery("last_loginISNOTEMPTY^u_service_account=true");
user.query();
while (user.next()) {
    var arr = [];
    arr.push(user.last_login);
    for (var i = 0; i <= arr.length - 1; i++) {
        var time = arr[i];
        var date1 = new GlideDate();
        date1.setValue(time);
        var date2 = new GlideDate();
        var millisecondsDifference = date2.getNumericValue() - date1.getNumericValue();
        var daysDifference = millisecondsDifference / (1000 * 60 * 60 * 24);
        var days = Math.floor(daysDifference);
        if (days > 30) {
            user.active = false;
            user.locked_out = true;
            user.update();
        }
 
    }
 
 
}
